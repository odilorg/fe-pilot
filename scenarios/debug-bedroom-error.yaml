name: "Debug Bedroom Filter Error"
description: "Reproduce and capture the bedroom filter error"
url: "https://staging.jahongir-app.uz/properties"

steps:
  - action: navigate
    url: "{{url}}"
    description: "Load properties page"

  - action: wait
    duration: 3000

  - action: screenshot
    description: "Initial page"

  - action: captureConsole
    description: "Start capturing console logs"

  - action: captureNetwork
    description: "Start capturing network requests"

  # Open bedroom dropdown and select Studio, 1-bedroom, 2-bedroom
  - action: click
    selector: "button:has-text('Выбрано'), button:has-text('Комнатность'), button:has-text('комнат')"
    description: "Open bedrooms filter"

  - action: wait
    duration: 500

  - action: screenshot
    description: "Dropdown opened"

  # Click Studio
  - action: click
    selector: "input[type='checkbox'][value='0'], label:has-text('Студия')"
    description: "Select Studio"

  - action: wait
    duration: 200

  # Click 1-bedroom
  - action: click
    selector: "input[type='checkbox'][value='1'], label:has-text('1-комнатная')"
    description: "Select 1-bedroom"

  - action: wait
    duration: 200

  # Click 2-bedroom
  - action: click
    selector: "input[type='checkbox'][value='2'], label:has-text('2-комнатная')"
    description: "Select 2-bedroom"

  - action: wait
    duration: 1000

  - action: screenshot
    description: "After selecting all 3"

  # Close dropdown
  - action: click
    selector: "body"
    description: "Close dropdown"

  - action: wait
    duration: 4000

  - action: screenshot
    description: "Final state - check for error"

  - action: captureConsole
    description: "Capture console errors"

  - action: captureNetwork
    description: "Capture network requests to see API calls"
